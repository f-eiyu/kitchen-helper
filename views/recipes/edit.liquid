{% layout "layout.liquid" %}

{% block title %}Editing Recipe{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="/css/recipes/recipe_nav.css">
<link rel="stylesheet" href="/css/layout-form.css">
{% endblock %}

{% block header %}Editing Recipe{% endblock %}

{% block content %}
<div class="card">
  <form action="/recipes/{{recipe._id}}?_method=PUT" method="POST">
    <fieldset>
      <legend>Editing {{recipe.name}}</legend>

      <label class="form-label" for="name">Name</label>
      <input
        class="form-control"
        type="text"
        name="name"
        value="{{recipe.name}}"
      />

      <div id="ingredients-block">
        {% for ing in recipe.ingredientList %}
          <label class="form-label" for="ingredients">Ingredient</label>
          <input
            class="form-control"
            type="text"
            name="ingredients"
            value="{{ing.name}}"
          />
          <label class="form-label" for="amounts">Amount</label>
          <input
            class="form-control"
            type="text"
            inputmode="numeric"
            name="amounts"
            value="{{ing.amount}}"
          />
        {% endfor %}
      </div>
      <div id="add-ingredient" class="btn btn-primary">Add another ingredient</div>

      <label class="form-label" for="instructions">Instructions</label>
      <textarea
        class="form-control"
        name="instructions"
      >{{recipe.instructions}}</textarea>

      <label class="form-label" for="tags">Tags</label>
      <input
        class="form-control"
        type="text"
        name="tags"
        value="{{tagStr}}"
      />

      <label class="form-label" for="notes">Notes</label>
      <input
        class="form-control"
        type="text"
        name="notes"
        value="{{noteStr}}"
      />

      <label class="form-label" for="favorite">Favorite?</label>
      <input
        class="form-check-input"
        type="checkbox"
        name="favorite"
        {% if recipe.favorite %} checked {% endif %}
      />
    </fieldset>

    <input
    type="submit"
    value="Save Recipe"
    class="btn btn-success"
  />
  </form>
</div>
<a href="/recipes/{{recipe._id}}">Back</a>
{% endblock %}

{% block scripts %}
<script src="/scripts/recipes/add-ingredient-button.js" async defer></script>
{% endblock %}
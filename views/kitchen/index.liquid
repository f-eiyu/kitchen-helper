{% layout "layout.liquid" %}

{% block title %}Kitchen{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="/css/layout-index.css">

<link rel="stylesheet" href="/css/kitchen/kitchen_nav.css">
<link rel="stylesheet" href="/css/kitchen/index.css">
{% endblock %}

{% block header %}What's in the Kitchen? ({{ings.size}}){% endblock %}

{% block content %}
  {% if ings.size < 1 %}
    <p>There is nothing in your kitchen :(</p>
  {% else %}
    {% for ing in ings %}
      <div class="card">
        <div class="card-title">
          <h4>{{ing.name}}</h4>
          {% if ing.favorite %}
            <img class="favorite-icon" src="./img/favorite.png" />
          {% endif %}
        </div>
        <div class="card-text">{{ing.amount}} on hand (updated {{ing.renderedDate}})</div>

        <!-- <ul>
          <li>amount: {{ing.amount}}</li>
          </li>
          <li>updated: {{ing.updatedAt}}</li>
        </ul> -->
          {% if ing.tags.size > 0 %}
            <div id="tag-container">
              {% for tag in ing.tags %}
                <div class="ing-tag">{{tag}}</div>
              {% endfor %}
            </div>
          {% endif %}

        <a href="/kitchen/{{ing._id}}"><span class="card-link"></span></a>

        <ul class="nav justify-content-around ingredient-nav">
          <li class="nav-item">
            <form action="/kitchen/{{ing._id}}?_method=DELETE" method="POST">
              <input
                type="submit"
                value="Delete"
                class="ingredient-nav-button"
              />
            </form>
          </li>
          <li class="nav-item">
            <form action="/">
              <input
                type="submit"
                value="Consume"
                class="ingredient-nav-button center-button"
              />
            </form>
          </li>
          <li class="nav-item">
            <form action="javascript:void(0);">
              <input
                type="submit"
                value="Buy More"
                class="ingredient-nav-button buy-more-button"
                id="buy-more-{{ing.name}}"
                target="/shoplist/transfer-ingredient"
              />
            </form>
          </li>
        </ul>
      </div>
    {% endfor %}
  {% endif %}

  <form action="/kitchen/new" class="new-item-button">
    <input
      type="submit"
      value="+"
    />
  </form>
{% endblock %}

{% block scripts %}
<script src="/scripts/kitchen/buymore.js" async defer></script>
{% endblock %}